{% extends "layout.html" %}

{% block content %}
<div class="container-xxl py-5">
    <div class="container">
        <div class="text-center wow fadeInUp" data-wow-delay="0.1s" style="animation: fadeInUp 0.6s ease 0.1s both;">
            <h6 class="section-title bg-white text-center text-primary px-3">Assessment</h6>
            <h1 class="mb-3">Online Assessment: {{ student.technology }}</h1>
            <p class="mb-5" style="font-size: 1.1rem; color: var(--text);">
                <strong style="color: var(--dark);">{{ student.name }}</strong> ({{ student.roll_number }})
            </p>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-8 wow fadeInUp" data-wow-delay="0.3s" style="animation: fadeInUp 0.6s ease 0.3s both;">
                <div class="test-container">
                    <form action="{{ url_for('take_test', student_id=student.id) }}" method="POST">
                        {% for question in questions %}
                        {% set outer_loop = loop %}
                        <div class="question-card">
                            <h5 class="mb-3" style="color: var(--dark); font-size: 1.2rem;">
                                <span
                                    style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; width: 35px; height: 35px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: 700;">{{
                                    loop.index }}</span>
                                {{ question.q }}
                            </h5>

                            <div style="padding-left: 50px;">
                                {% for option in question.options %}
                                <div class="form-check mb-3"
                                    style="padding: 15px; border-radius: 10px; transition: all .3s ease; cursor: pointer;"
                                    onmouseover="this.style.background='var(--light)'"
                                    onmouseout="this.style.background='transparent'">
                                    <input class="form-check-input" type="radio" name="question_{{ outer_loop.index0 }}"
                                        value="{{ option }}" id="q{{ outer_loop.index0 }}_opt{{ loop.index }}" required
                                        style="cursor: pointer; width: 20px; height: 20px; margin-top: 2px;">
                                    <label class="form-check-label" for="q{{ outer_loop.index0 }}_opt{{ loop.index }}"
                                        style="cursor: pointer; margin-left: 10px; font-size: 1rem; color: var(--text);">
                                        {{ option }}
                                    </label>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endfor %}

                        <button type="submit" class="btn btn-primary w-100 py-3 mt-4"
                            style="font-size: 1.2rem; font-weight: 700;">
                            <i class="fa fa-paper-plane me-2"></i> Submit Assessment
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .form-check-input:checked {
        background-color: var(--primary);
        border-color: var(--primary);
    }

    .form-check-input:checked+.form-check-label {
        color: var(--primary);
        font-weight: 600;
    }
</style>
{% endblock %}