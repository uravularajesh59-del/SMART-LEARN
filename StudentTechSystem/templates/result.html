{% extends "layout.html" %}

{% block content %}
<div class="container-xxl py-5">
    <div class="container">
        <div class="text-center wow fadeInUp" data-wow-delay="0.1s" style="animation: fadeInUp 0.6s ease 0.1s both;">
            <h6 class="section-title bg-white text-center text-primary px-3">Test Results</h6>
            <h1 class="mb-5">Assessment Complete</h1>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-8">
                {% if student.is_certified %}
                <!-- Success State -->
                <div class="text-center" style="animation: fadeInUp 0.8s ease;">
                    <div class="icon-success" style="margin-bottom: 30px;">
                        <i class="fas fa-check-circle"></i>
                    </div>

                    <h1
                        style="color: var(--dark); font-size: 3rem; margin-bottom: 20px; animation: fadeInDown 0.6s ease 0.2s both;">
                        ðŸŽ‰ Congratulations!
                    </h1>

                    <div
                        style="background: linear-gradient(135deg, #06BBCC 0%, #0891a0 100%); color: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 40px rgba(6, 187, 204, 0.3); margin-bottom: 30px; animation: fadeInUp 0.6s ease 0.4s both;">
                        <h2 style="color: white; margin-bottom: 15px;">{{ student.name }}</h2>
                        <p style="font-size: 1.5rem; margin-bottom: 10px; opacity: 0.95;">
                            You passed the test with a score of
                        </p>
                        <div style="font-size: 4rem; font-weight: 800; margin: 20px 0;">
                            {{ student.test_score }}/{{ 3 }}
                        </div>
                        <p style="font-size: 1.2rem; opacity: 0.9;">
                            <i class="fas fa-trophy" style="margin-right: 10px;"></i>
                            You have been certified in <strong>{{ student.technology }}</strong>
                        </p>
                    </div>

                    <div
                        style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08); margin-bottom: 30px; animation: fadeInUp 0.6s ease 0.6s both;">
                        <h4 style="color: var(--dark); margin-bottom: 20px;">
                            <i class="fas fa-certificate" style="color: var(--primary); margin-right: 10px;"></i>
                            Your Certificate is Ready!
                        </h4>
                        <p style="color: var(--text); font-size: 1.1rem; margin-bottom: 25px;">
                            Download your official certificate of completion and share your achievement with the world.
                        </p>

                        <a href="{{ url_for('certificate', student_id=student.id) }}" class="btn btn-primary"
                            style="padding: 18px 45px; font-size: 1.2rem; margin: 10px;">
                            <i class="fa fa-download me-2"></i>
                            View & Download Certificate
                        </a>

                        <a href="{{ url_for('index') }}" class="btn"
                            style="background: linear-gradient(135deg, #FB873F 0%, #e67835 100%); color: white; padding: 18px 45px; font-size: 1.2rem; margin: 10px; box-shadow: 0 5px 15px rgba(251, 135, 63, 0.3);">
                            <i class="fa fa-home me-2"></i>
                            Back to Home
                        </a>
                    </div>

                    <!-- Achievement Stats -->
                    <div class="row g-4" style="animation: fadeInUp 0.6s ease 0.8s both;">
                        <div class="col-md-4">
                            <div
                                style="background: var(--light); padding: 25px; border-radius: 15px; border-left: 4px solid var(--primary);">
                                <i class="fas fa-book"
                                    style="font-size: 2.5rem; color: var(--primary); margin-bottom: 15px;"></i>
                                <h5 style="color: var(--dark);">Course</h5>
                                <p style="color: var(--text); margin: 0;">{{ student.technology }}</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div
                                style="background: var(--light); padding: 25px; border-radius: 15px; border-left: 4px solid var(--secondary);">
                                <i class="fas fa-star"
                                    style="font-size: 2.5rem; color: var(--secondary); margin-bottom: 15px;"></i>
                                <h5 style="color: var(--dark);">Score</h5>
                                <p style="color: var(--text); margin: 0; font-weight: 700; font-size: 1.3rem;">{{
                                    student.test_score }}/3</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div
                                style="background: var(--light); padding: 25px; border-radius: 15px; border-left: 4px solid #28a745;">
                                <i class="fas fa-check-circle"
                                    style="font-size: 2.5rem; color: #28a745; margin-bottom: 15px;"></i>
                                <h5 style="color: var(--dark);">Status</h5>
                                <p style="color: #28a745; margin: 0; font-weight: 700;">Certified</p>
                            </div>
                        </div>
                    </div>
                </div>

                {% else %}
                <!-- Failure State -->
                <div class="text-center" style="animation: fadeInUp 0.8s ease;">
                    <div class="icon-error" style="margin-bottom: 30px;">
                        <i class="fas fa-times-circle"></i>
                    </div>

                    <h1 style="color: var(--dark); font-size: 2.5rem; margin-bottom: 20px;">
                        Test Completed
                    </h1>

                    <div
                        style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 40px rgba(220, 53, 69, 0.3); margin-bottom: 30px;">
                        <p style="font-size: 1.3rem; margin-bottom: 10px; opacity: 0.95;">
                            Your Score
                        </p>
                        <div style="font-size: 4rem; font-weight: 800; margin: 20px 0;">
                            {{ student.test_score }}/{{ 3 }}
                        </div>
                        <p style="font-size: 1.1rem; opacity: 0.9;">
                            Unfortunately, you did not pass this time.
                        </p>
                    </div>

                    <div
                        style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08); margin-bottom: 30px;">
                        <h4 style="color: var(--dark); margin-bottom: 20px;">
                            <i class="fas fa-lightbulb" style="color: var(--secondary); margin-right: 10px;"></i>
                            Don't Give Up!
                        </h4>
                        <p style="color: var(--text); font-size: 1.1rem; margin-bottom: 25px;">
                            Review the course materials and try again. You need to score at least 2 out of 3 to pass.
                        </p>

                        <a href="{{ url_for('course', roll_number=student.roll_number) }}" class="btn btn-primary"
                            style="padding: 18px 45px; font-size: 1.2rem; margin: 10px;">
                            <i class="fa fa-video me-2"></i>
                            Review Course
                        </a>

                        <a href="{{ url_for('index') }}" class="btn"
                            style="background: linear-gradient(135deg, #52565b 0%, #181D38 100%); color: white; padding: 18px 45px; font-size: 1.2rem; margin: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);">
                            <i class="fa fa-home me-2"></i>
                            Back to Home
                        </a>
                    </div>

                    <!-- Feedback -->
                    <div style="background: var(--light); padding: 25px; border-radius: 15px; text-align: left;">
                        <h5 style="color: var(--dark); margin-bottom: 15px;">
                            <i class="fas fa-info-circle" style="color: var(--primary); margin-right: 10px;"></i>
                            Tips for Success
                        </h5>
                        <ul style="color: var(--text); line-height: 2; margin: 0; padding-left: 25px;">
                            <li>Watch all course videos carefully</li>
                            <li>Take notes while learning</li>
                            <li>Practice the concepts covered</li>
                            <li>Review the material before retaking the test</li>
                        </ul>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
    /* Additional animations for result page */
    @keyframes confetti {
        0% {
            transform: translateY(0) rotate(0deg);
            opacity: 1;
        }

        100% {
            transform: translateY(100vh) rotate(360deg);
            opacity: 0;
        }
    }

    .icon-success i,
    .icon-error i {
        animation: pulse 2s ease-in-out infinite;
    }
</style>
{% endblock %}